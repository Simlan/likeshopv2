(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user_order-user_order"],{"0746":function(t,e,r){"use strict";r.r(e);var n=r("0bca"),i=r.n(n);for(var o in n)"default"!==o&&function(t){r.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"0bca":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{}},components:{},props:{status:{type:String,default:"loading"},errorText:{type:String,default:"加载失败，点击重新加载"},loadingText:{type:String,default:"加载中..."},finishedText:{type:String,default:"我可是有底线的～"},slotEmpty:{type:Boolean,default:!1},color:{type:String,default:"#666"}},methods:{onRefresh:function(){this.$emit("refresh")}}};e.default=n},1476:function(t,e,r){"use strict";r.r(e);var n=r("6340"),i=r("303b");for(var o in i)"default"!==o&&function(t){r.d(e,t,(function(){return i[t]}))}(o);r("8031");var a,s=r("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"35d772bc",null,!1,n["a"],a);e["default"]=d.exports},1578:function(t,e,r){var n=r("f988");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=r("4f06").default;i("309ad689",n,!0,{sourceMap:!1,shadowMode:!1})},"303b":function(t,e,r){"use strict";r.r(e);var n=r("7395"),i=r.n(n);for(var o in n)"default"!==o&&function(t){r.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"3c95":function(t,e,r){"use strict";var n=r("1578"),i=r.n(n);i.a},"55e1":function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return n}));var n={loading:r("37af").default},i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"loading-footer row-center",style:"color: "+t.color},["loading"===t.status?r("v-uni-view",{staticClass:"loading row"},[r("loading",{staticClass:"mr20",attrs:{color:t.color}}),r("v-uni-text",{style:"color: "+t.color},[t._v(t._s(t.loadingText))])],1):t._e(),"finished"===t.status?r("v-uni-view",{staticClass:"finished"},[t._v(t._s(t.finishedText))]):t._e(),"error"===t.status?r("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)}}},[t._v(t._s(t.errorText))]):t._e(),"empty"===t.status?r("v-uni-view",{staticClass:"empty"},[t.slotEmpty?t._t("empty"):r("v-uni-text",[t._v("暂无数据")])],2):t._e()],1)},o=[]},6340:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return n}));var n={orderGoods:r("6a5b").default,priceFormat:r("32eb").default,loadingFooter:r("e2bb").default,orderDialog:r("7661").default},i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("v-uni-view",{staticClass:"order-list"},[t._l(t.orderList,(function(e,n){return r("v-uni-navigator",{key:n,staticClass:"order-item bg-white mt20",attrs:{"hover-class":"none",url:"/pages/order_details/order_details?id="+e.id}},[r("v-uni-view",{staticClass:"order-header row-between"},[r("v-uni-view",{staticClass:"row"},[t._v("订单编号："+t._s(e.order_sn))]),r("v-uni-view",{class:4==e.order_status?"muted":"primary"},[t._v(t._s(t.getOrderStatus(e.order_status)))])],1),r("v-uni-view",{staticClass:"order-con"},[r("order-goods",{attrs:{list:e.order_goods}}),r("v-uni-view",{staticClass:"all-price row-end"},[r("v-uni-text",{staticClass:"muted xs"},[t._v("共"+t._s(e.goods_count)+"件商品，总金额：")]),r("price-format",{attrs:{"subscript-size":30,"first-size":30,"second-size":30,price:e.order_amount}})],1)],1),e.cancel_btn||e.delivery_btn||e.take_btn||e.del_btn||e.pay_btn||e.comment_btn?r("v-uni-view",{staticClass:"order-footer row"},[r("v-uni-view",{staticStyle:{flex:"1"}}),e.cancel_btn?r("v-uni-view",[r("v-uni-button",{staticClass:"plain br60 lighter",attrs:{size:"sm","hover-class":"none"},on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.cancelOrder(e.id)}}},[t._v("取消订单")])],1):t._e(),e.delivery_btn?r("v-uni-navigator",{attrs:{"hover-class":"none",url:"/pages/goods_logistics/goods_logistics?id="+e.id}},[r("v-uni-button",{staticClass:"btn plain br60 lighter",attrs:{size:"sm","hover-class":"none"}},[t._v("查看物流")])],1):t._e(),e.del_btn?r("v-uni-view",[r("v-uni-button",{staticClass:"btn plain br60 lighter",attrs:{size:"sm","hover-class":"none"},on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.delOrder(e.id)}}},[t._v("删除订单")])],1):t._e(),e.pay_btn?r("v-uni-view",{staticClass:"ml20"},[r("v-uni-button",{staticClass:"btn bg-primary br60 white",attrs:{size:"sm"},on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.payNow(e.id)}}},[t._v("立即付款")])],1):t._e(),e.comment_btn?r("v-uni-view",{staticClass:"ml20"},[r("v-uni-button",{staticClass:"btn plain btn br60 primary red",attrs:{size:"sm","hover-class":"none"}},[t._v("去评价")])],1):t._e(),e.take_btn?r("v-uni-view",{staticClass:"ml20"},[r("v-uni-button",{staticClass:"btn plain br60 primary red",attrs:{size:"sm","hover-class":"none"},on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.comfirmOrder(e.id)}}},[t._v("确认收货")])],1):t._e()],1):t._e()],1)})),r("loading-footer",{attrs:{status:t.status,"slot-empty":!0},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.reload.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"column-center",staticStyle:{"padding-top":"200rpx"},attrs:{slot:"empty"},slot:"empty"},[r("v-uni-image",{staticClass:"img-null",attrs:{src:"/static/images/goods_null.png"}}),r("v-uni-text",{staticClass:"lighter"},[t._v("暂无订单")])],1)],1)],2),r("order-dialog",{ref:"orderDialog",attrs:{"order-id":t.orderId,type:t.type},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.reflesh.apply(void 0,arguments)}}})],1)},o=[]},"6cac":function(t,e,r){"use strict";r.r(e);var n=r("9b45"),i=r("bfbb");for(var o in i)"default"!==o&&function(t){r.d(e,t,(function(){return i[t]}))}(o);var a,s=r("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"63ac3dc0",null,!1,n["a"],a);e["default"]=d.exports},7395:function(t,e,r){"use strict";var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("96cf");var i=n(r("1da1")),o=r("fd39"),a=r("408f"),s=r("01eb"),d=r("651e"),c=r("f30f"),u={data:function(){return{page:1,orderList:[],status:s.loadingType.LOADING,showCancel:!1,type:0,orderId:""}},components:{},props:{orderType:{type:String}},created:function(){var t=this;uni.$on("refreshorder",(function(){t.reflesh()}))},beforeMount:function(){this.getOrderListFun()},destroyed:function(){uni.$off("refreshorder")},methods:{reflesh:function(){this.page=1,this.orderList=[],this.status=s.loadingType.LOADING,this.type=0,this.getOrderListFun()},reload:function(){this.status=s.loadingType.LOADING,this.getOrderListFun()},orderDialog:function(){this.$refs.orderDialog.open()},delOrder:function(t){var e=this;this.orderId=t,this.type=1,this.$nextTick((function(){e.orderDialog()}))},comfirmOrder:function(t){var e=this;this.orderId=t,this.type=2,this.$nextTick((function(){e.orderDialog()}))},cancelOrder:function(t){var e=this;this.orderId=t,this.type=0,this.$nextTick((function(){e.orderDialog()}))},payNow:function(t){var e=t.currentTarget.dataset.id;(0,a.prepay)({from:"order",order_id:e}).then((function(t){if(Toast.clear(),1==t.code){var e=t.data;(0,d.wxpay)(e).then((function(){Tips({title:"支付成功"}),event.emit("RESET_LIST")})).catch((function(){}))}}))},getOrderListFun:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.page,n=t.orderType,i=t.orderList,a=t.status,e.next=3,(0,c.loadingFun)(o.getOrderList,r,i,a,{type:n});case 3:if(s=e.sent,s){e.next=6;break}return e.abrupt("return");case 6:t.page=s.page,t.orderList=s.dataList,t.status=s.status,console.log(t.status);case 10:case"end":return e.stop()}}),e)})))()}},computed:{getOrderStatus:function(){return function(t){var e="";switch(t){case 0:e="待支付";break;case 1:e="待发货";break;case 2:e="待收货";break;case 3:e="已完成";break;case 4:e="订单已关闭";break}return e}}}};e.default=u},8031:function(t,e,r){"use strict";var n=r("990f"),i=r.n(n);i.a},"990f":function(t,e,r){var n=r("ae71");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=r("4f06").default;i("2a0ab67e",n,!0,{sourceMap:!1,shadowMode:!1})},"9b45":function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return n}));var n={tabs:r("91b8").default,tab:r("efbf").default,orderList:r("1476").default},i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"user-order"},[r("tabs",{attrs:{active:t.active,"swipe-threshold":5,config:{itemWidth:150}},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeShow.apply(void 0,arguments)}}},t._l(t.order,(function(e,n){return r("tab",{key:n,attrs:{title:e.name,name:e.type}},[e.isShow?r("order-list",{ref:"order"+e.type,refInFor:!0,attrs:{"order-type":e.type}}):t._e()],1)})),1)],1)},o=[]},ae71:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */.order-list[data-v-35d772bc]{min-height:calc(100vh - %?80?%);padding:0 %?20?%;overflow:hidden}.order-list .order-item[data-v-35d772bc]{border-radius:%?10?%}.order-list .order-item .order-header[data-v-35d772bc]{height:%?80?%;padding:0 %?24?%;border-bottom:1px dotted #e5e5e5}.order-list .order-item .all-price[data-v-35d772bc]{text-align:right;padding:0 %?24?% %?20?%}.order-list .order-item .order-footer[data-v-35d772bc]{height:%?100?%;border-top:1px solid #e5e5e5;padding:0 %?24?%}.order-list .order-item .order-footer .plain[data-v-35d772bc]{border:1px solid #bbb}.order-list .order-item .order-footer .plain.red[data-v-35d772bc]{border-color:#ff2c3c}',""]),t.exports=e},bfbb:function(t,e,r){"use strict";r.r(e);var n=r("e6dd"),i=r.n(n);for(var o in n)"default"!==o&&function(t){r.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},e2bb:function(t,e,r){"use strict";r.r(e);var n=r("55e1"),i=r("0746");for(var o in i)"default"!==o&&function(t){r.d(e,t,(function(){return i[t]}))}(o);r("3c95");var a,s=r("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"1b4a51d1",null,!1,n["a"],a);e["default"]=d.exports},e6dd:function(t,e,r){"use strict";r("c740"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("01eb"),i={data:function(){return{active:n.orderType.ALL,order:[{name:"全部",type:n.orderType.ALL,isShow:!1},{name:"待付款",type:n.orderType.PAY,isShow:!1},{name:"待收货",type:n.orderType.DELIVERY,isShow:!1},{name:"已完成",type:n.orderType.FINISH,isShow:!1},{name:"已关闭",type:n.orderType.CLOSE,isShow:!1}]}},components:{},props:{},onLoad:function(t){console.log(t);var e=t.type||n.orderType.ALL;this.changeShow(e)},onPullDownRefresh:function(){var t=this.active,e=this.order;console.log(this.$refs["order"+e[t].type]),this.$refs["order"+e[t].type][0].reflesh()},onReachBottom:function(){var t=this.active,e=this.order;console.log(this.$refs["order"+e[t].type]),this.$refs["order"+e[t].type][0].getOrderListFun()},methods:{changeShow:function(t){var e=this.order,r=e.findIndex((function(e){return e.type==t}));-1!=r&&(this.active=r,this.order[r].isShow=!0)}}};e.default=i},f988:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,".loading-footer[data-v-1b4a51d1]{padding:%?30?% 0;color:#666}",""]),t.exports=e}}]);