(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4617f56b"],{"094c":function(t,s,e){},1149:function(t,s,e){t.exports=e.p+"img/pay_address.bca0ca89.png"},"1c70":function(t,s,e){},"358a":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"confirm-order"},[a("div",{staticClass:"confirm-con"},[a("div",{staticClass:"address-wrap row contain",on:{click:t.onSelectAddress}},[a("img",{staticClass:"icon mr10",attrs:{src:e("1149")}}),a("div",{staticClass:"address"},[t.address.contact?a("div",[a("span",{staticClass:"name md mr10"},[t._v(t._s(t.address.contact))]),a("span",{staticClass:"phone md"},[t._v(t._s(t.address.telephone))]),a("div",{staticClass:"area sm mt10 lighter"},[t._v(" "+t._s(t.address.province)+" "+t._s(t.address.city)+" "+t._s(t.address.district)+" "+t._s(t.address.address)+" ")])]):a("div",{staticClass:"black md"},[t._v(" 设置收货地址 ")])]),a("img",{staticClass:"icon-sm ml10",attrs:{src:e("d5b1")}})]),a("div",{staticClass:"goods contain"},[a("order-goods",{attrs:{list:t.goodsLists}}),t._m(0),a("div",{staticClass:"input"},[a("van-field",{attrs:{type:"textarea",rows:"1",autosize:{minHeight:30,maxHeight:80},label:"店铺留言",placeholder:"选填，请输入150字以内的文字留言"},model:{value:t.userRemark,callback:function(s){t.userRemark=s},expression:"userRemark"}})],1)],1),a("div",{staticClass:"contain coupons"},[a("div",{staticClass:"item row-between",on:{click:function(s){t.showCoupon=!0}}},[a("div",[t._v("优惠券")]),a("div",{staticClass:"row"},[t.orderInfo.discount_amount?a("span",{staticClass:"primary"},[t._v("-￥"+t._s(t.orderInfo.discount_amount))]):a("span",{staticClass:"muted md"},[t._v("请选择")]),a("img",{staticClass:"icon-sm ml10",attrs:{src:e("d5b1")}})])])]),a("div",{staticClass:"price contain"},[a("div",{staticClass:"item row-between"},[a("div",[t._v("商品金额")]),a("div",[t._v("¥"+t._s(t.orderInfo.total_goods_price))])]),a("div",{staticClass:"item row-between"},[a("div",[t._v("运费")]),a("div",[t._v("¥"+t._s(t.orderInfo.shipping_price))])]),t.orderInfo.discount_amount?a("div",{staticClass:"item row-between"},[a("div",[t._v("优惠券")]),a("div",{staticClass:"primary"},[t._v("-¥"+t._s(t.orderInfo.discount_amount))])]):t._e()]),a("div",{staticClass:"pay-way contain"},[a("div",{staticClass:"lighter title"},[t._v("支付方式")]),a("van-radio-group",{staticClass:"radio-group",attrs:{"checked-color":t.primaryColor},model:{value:t.payWay,callback:function(s){t.payWay=s},expression:"payWay"}},t._l(t.payWayArr,(function(s){return a("div",{key:s.type,staticClass:"item row-between",on:{click:function(e){t.payWay=s.type}}},[a("div",{staticClass:"row"},[a("img",{staticClass:"icon-lg mr10",attrs:{src:s.icon}}),a("div",{},[a("div",{staticClass:"balck bt10"},[t._v(t._s(s.name))]),a("div",{staticClass:"muted xs"},[t._v(" "+t._s(s.desc)+t._s(3==s.type?t.orderInfo.user_money:"")+" ")])])]),a("van-radio",{attrs:{name:s.type}})],1)})),0)],1)]),a("div",{staticClass:"footer bg-white row-between"},[a("div",{staticClass:"all-price lg row"},[a("span",[t._v("合计：")]),a("div",{staticClass:"primary row"},[t._v(" ￥ "),a("price-slice",{attrs:{price:t.orderInfo.order_amount}})],1)]),a("button",{staticClass:"btn br60 white",attrs:{size:"md","hover-class":"none"},on:{click:t.onSubmitOrder}},[t._v(" 提交订单 ")])]),a("van-popup",{staticClass:"coupon-popup",attrs:{"safe-area-inset-bottom":"",closeable:"",round:"",position:"bottom"},on:{close:t.onCloseCoupon},model:{value:t.showCoupon,callback:function(s){t.showCoupon=s},expression:"showCoupon"}},[a("div",{staticClass:"title"},[t._v("优惠券")]),a("van-tabs",{attrs:{active:t.popActive}},[a("van-tab",{attrs:{title:"可使用优惠券 ("+t.usableCoupon.length+")"}},[a("coupon-popup",{attrs:{list:t.usableCoupon,type:0},on:{select:t.onSelectCoupon}})],1),a("van-tab",{attrs:{title:"不可用优惠券 ("+t.unusableCoupon.length+")"}},[a("coupon-popup",{attrs:{list:t.unusableCoupon,type:1}})],1)],1),a("div",{staticClass:"bg-primary white br60 btn lg",attrs:{size:"md"},on:{click:t.onCloseCoupon}},[t._v(" 确认 ")])],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item row-between"},[e("div",[t._v("配送方式")]),e("div",[t._v("快递")])])}],o=(e("d3b7"),e("ac1f"),e("5319"),e("96cf"),e("1da1")),n=e("ade3"),r=(e("18a0"),e("73f5")),c=e("b562"),d=e("6a99"),u=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"coupon-popup"},[a("div",{staticClass:"coupon-list"},[a("van-radio-group",{attrs:{"checked-color":t.primaryColor},model:{value:t.radio,callback:function(s){t.radio=s},expression:"radio"}},t._l(t.coupons,(function(s){return a("div",{key:s.id,staticClass:"mb10",on:{click:function(e){return t.selectCoupon(s.id)}}},[a("div",{staticClass:"row coupon-item"},[a("div",{staticClass:"price white column-center"},[a("div",{staticClass:"row xl"},[a("div",{staticStyle:{"margin-top":"7px"}},[t._v("￥")]),a("price-slice",{attrs:{price:s.money,firstClass:"couponSize"}})],1),a("div",{staticStyle:{"font-size":"14px","margin-top":"4px"}},[t._v(t._s(s.use_condition))])]),a("div",{staticClass:"info",staticStyle:{flex:"1"}},[a("div",{staticClass:"bold lg",staticStyle:{"margin-bottom":"9px"}},[t._v(t._s(s.name))]),a("div",{staticClass:"row-between"},[a("div",{staticClass:"xxs lighter two-txt-cut"},[t._v(t._s(s.coupon_type))])]),a("div",{staticClass:"xxs lighter"},[t._v(t._s(s.use_time_tips))])]),0==t.type?a("van-radio",{staticClass:"mr10",attrs:{name:s.id}}):t._e()],1),s.tips?a("div",{staticClass:"tips-container bg-white"},[a("div",{staticClass:"row-between",staticStyle:{padding:"5px 10px"}},[a("div",{staticClass:"tips xs mt5"},[t._v(t._s(s.tips))])])]):t._e()])})),0)],1),0==t.list.length?a("div",{staticClass:"column-center",staticStyle:{"padding-top":"30px"}},[a("img",{staticClass:"img-null",attrs:{src:e("681b")}}),a("span",{staticClass:"muted mt10"},[t._v("暂无优惠券～")])]):t._e()])},l=[],p=(e("a9e3"),{name:"couponPopup",props:{list:{type:Array},type:{type:Number}},data:function(){return{coupons:[],radio:""}},created:function(){},methods:{selectCoupon:function(t){0==this.type&&(this.radio==t?this.radio="":this.radio=t),this.$emit("select",this.radio)}},watch:{list:{immediate:!0,handler:function(t){this.coupons=t}}}}),v=p,m=(e("488b"),e("2877")),b=Object(m["a"])(v,u,l,!1,null,"0b6dc93c",null),f=b.exports,C=f,w=e("399b"),_=e("2f9f"),y={name:"confirmOrder",components:{OrderGoods:d["a"],CouponPopup:C},data:function(){var t;return t={address:{},orderInfo:{},userRemark:"",goodsLists:[],addressId:"",showCoupon:!1,popActive:0,usableCoupon:[],unusableCoupon:[],payWay:1,payWayArr:[{icon:e("6f4f"),name:"微信支付",type:w["d"].wechat,desc:"微信快捷支付"}]},Object(n["a"])(t,"showCoupon",!1),Object(n["a"])(t,"useIntegral",0),t},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var e,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.$route.query,a=e.goods,i=e.type,t.addressId=t.$ls.get("addressid"),t.$ls.remove("addressid"),a=JSON.parse(a)||[],t.confirmType=i||"",t.goods=a,s.next=8,t.$getOrderCoupon();case 8:t.$orderBuy();case 9:case"end":return s.stop()}}),s)})))()},mounted:function(){this.$ls.remove("addressid")},methods:{onSelectAddress:function(){this.$router.push({name:"userAddress",query:{type:1}})},onCloseCoupon:function(){this.showCoupon=!1,this.$orderBuy()},onSelectCoupon:function(t){this.couponId=t},onSubmitOrder:function(){this.toast=this.$toast({type:"loading",message:"请稍等...",duration:0}),this.$orderBuy("submit")},$getOrderCoupon:function(){var t=this;return new Promise((function(s){console.log(t.goods),Object(r["q"])({goods:t.goods}).then((function(e){if(1==e.code){var a=e.data,i=a.usable,o=a.unusable;t.usableCoupon=i,t.unusableCoupon=o,s()}}))}))},$orderBuy:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",e=this.address,a=this.userRemark,i={action:s,goods:this.goods,coupon_id:this.couponId};"info"==s?this.addressId&&(i.address_id=this.addressId):"submit"==s&&(i.remark=a,i.address_id=e.id,i.type=this.confirmType,i.pay_way=this.payWay),Object(r["s"])(i).then((function(e){if(1!=e.code)return t.toast&&t.toast.clear(),!1;if("info"==s){var a=e.data,i=a.address,o=a.goods_lists;return t.address=i,t.goodsLists=o,t.orderInfo=e.data,t.addressId=i.id,!1}if("submit"==s){var n=e.data,r=n.order_id,d=n.type;return t.tradeId=r,t.type=d,Object(c["l"])({from:d,order_id:r})}})).then((function(s){if(t.toast&&t.toast.clear(),1==s.code){var e=s.data;Object(_["a"])(e).then((function(s){t.$router.replace({name:"payResult",query:{id:t.tradeId,type:t.type}})})).catch((function(){t.$router.replace({name:"userOrder"})}))}else 10001==s.code&&t.$router.replace({name:"payResult",query:{id:t.tradeId,type:t.type}})}))}}},g=y,h=(e("b933"),Object(m["a"])(g,a,i,!1,null,"35ec2ad0",null));s["default"]=h.exports},"399b":function(t,s,e){"use strict";e.d(s,"c",(function(){return a})),e.d(s,"d",(function(){return i})),e.d(s,"a",(function(){return o})),e.d(s,"e",(function(){return n})),e.d(s,"b",(function(){return r}));var a={ALL:"all",PAY:"pay",DELIVERY:"delivery",FINISH:"finish",CLOSE:"close"},i={wechat:1},o={NORMAL:"normal",HANDLING:"apply",FINISH:"finish"},n={ONLY_REFUND:0,REFUNDS:1},r={REGISTER:"ZCYZ",FINDPWD:"ZHMM",LOGIN:"YZMDL",CHANGE_MOBILE:"BGSJHM"}},"488b":function(t,s,e){"use strict";e("094c")},"681b":function(t,s,e){t.exports=e.p+"img/null_coupon.5e3375fb.png"},"6a99":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-goods bg-white"},t._l(t.list,(function(s){return e("div",{key:s.id,staticClass:"item-wrap",on:{click:function(e){t.link&&t.goPage("goodsDetail",{id:s.goods_id})}}},[e("div",{staticClass:"item row"},[e("div",{staticClass:"goods-img"},[e("van-image",{attrs:{width:"100%",radius:"5px",height:"100%",src:s.image_str||s.image}})],1),e("div",{staticClass:"goods-info ml10"},[e("div",{staticClass:"goods-name two-txt-cut mb5"},[t._v(" "+t._s(s.goods_name||s.name))]),e("div",{staticClass:"goods-spec xs muted mb10"},[t._v(t._s(s.spec_value_str))]),e("div",{staticClass:"row-between"},[e("div",{staticClass:"goods-price"},[e("div",{staticClass:"lg primary row"},[e("span",{staticClass:"sm"},[t._v("￥")]),e("div",{staticClass:"xl"},[e("price-slice",{attrs:{weight:500,price:s.goods_price}})],1)])]),e("div",{staticClass:"goods-num sm"},[t._v("x"+t._s(s.goods_num))])])])]),t.link&&s.comment_btn?e("div",{staticClass:"footer row"},[e("div",{staticStyle:{flex:"1"}}),s.comment_btn?e("div",{on:{click:function(e){return t.goPage("commodityEvaluation",{id:s.id})}}},[e("button",{staticClass:"plain br60",attrs:{size:"xs"}},[t._v("评价晒图")])]):t._e(),e("div",{staticClass:"ml10"},[e("button",{staticClass:"plain br60",attrs:{size:"xs"},on:{click:function(e){return t.goPage("applyAfterSales",{item_id:s.item_id,order_id:s.order_id})}}},[t._v("申请退款")])])]):t._e()])})),0)},i=[],o=(e("a9e3"),{name:"OrderGoods",components:{},props:{list:{type:Array,default:function(){return[]}},link:{type:Boolean,default:!1},shopId:{type:Number}},methods:{goPage:function(t,s){this.$router.push({name:t,query:s})}}}),n=o,r=(e("73c4"),e("2877")),c=Object(r["a"])(n,a,i,!1,null,"b8ee5e96",null),d=c.exports;s["a"]=d},"6f4f":function(t,s,e){t.exports=e.p+"img/pay_wechat.dfdad8a9.png"},"73c4":function(t,s,e){"use strict";e("1c70")},"9c02":function(t,s,e){},b933:function(t,s,e){"use strict";e("9c02")},d5b1:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAABd1BMVEUAAAAAAAAAAABVVVVmZmZtbW1gYGBxcXFdXV1qampiYmJ2dnZtbW1mZmZgYGBwcHBpaWljY2NxcXFmZmZtbW1oaGhvb29qampmZmZsbGxtbW1ra2twcHBubm5ra2tvb29wcHBubm5tbW1wcHBtbW1wcHBvb29tbW1vb29ubm5ycnJsbGxxcXFwcHBubm5wcHBxcXFwcHBxcXFubm5ubm5vb29wcHBvb29vb29wcHBvb29vb29vb29vb29ubm5wcHBvb29vb29vb29ubm5vb29wcHBvb29ubm5wcHBwcHBvb29vb29vb29vb29wcHBubm5wcHBvb29vb29vb29wcHBvb29ubm5vb29vb29wcHBwcHBvb29vb29wcHBwcHBwcHBvb29vb29wcHBwcHBvb29wcHBvb29wcHBvb29vb29wcHBwcHBvb29wcHBvb29wcHBwcHBwcHBvb29vb29wcHBvb29wcHBwcHBvb29wcHBwcHBvb29wcHBhabGmAAAAfHRSTlMAAQIDBQcICQsMDQ0ODxAQERISFBUWFxgZGhwfIiUmJyksLzAxMjU2Nzo6Oz1AQUJGaW94eXp7gYOEhYeIiouLjI6RlpqbnJ2doKGjpqqtsLC3vb/AwcPDxcbJy8zP0tTV19nb3N3f4uPo6evs8vPz9Pb3+Pj6+vv8/P3+O+IQPgAAAZNJREFUWMPt2MdSAkEUheFBBZVRVEAUFVTMOeeIohINmDCLOWdhYObhhem2XLm7R4uqPg/w161vMXQhSWJiYmI5uLI2Vz6m3Lx9czkEKcsbWmYLhYijE9n0x7SZPt2q6Xvx0qete2kW95rI2+2HLP0+RW5icMe5yQy9Se0JN5mjN+k4wpk0nONM6uI4k05h8qvJ23gxzOR5AmByxk0myU0M3cc4k8YrnInrL0zGcCZPI0CTYSPM5HW0iN7kmrUfASb1FyrMpOcUZ+LJdZNBI8zk1kNv0vLA2gPk5cqgwn4te8nL6ym9rAZk4nJpkH1J1IMakEYqQl22rfGbI07icomf3azuV1Pf7E9yDfLyqgLWSMM0lDBKIx2uQmnEHDANR85oyEu8vEt9s9Wn/xWgJUN26nKE3xyivln28fKOXWj8aGyhNBIBK0ojQH2z+Vtjk/pmyyJKwxJOgjQKZvm3LlpB/Uhy3+vlz+Vy8pddF/vtXrHRP0cd2Se6EqW/WZLy+mPa3TyinHmiO/uaTJKYmJjYf+wLmpv4t3Rddy0AAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-4617f56b.4a00720e.js.map