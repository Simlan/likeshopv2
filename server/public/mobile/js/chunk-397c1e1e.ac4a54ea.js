(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-397c1e1e"],{2909:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("6b75");function o(e){if(Array.isArray(e))return Object(i["a"])(e)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("d3b7"),s("3ca3"),s("ddb0");function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var a=s("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){return o(e)||n(e)||Object(a["a"])(e)||c()}},"399b":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return n})),s.d(t,"e",(function(){return a})),s.d(t,"b",(function(){return c}));var i={ALL:"all",PAY:"pay",DELIVERY:"delivery",FINISH:"finish",CLOSE:"close"},o={wechat:1},n={NORMAL:"normal",HANDLING:"apply",FINISH:"finish"},a={ONLY_REFUND:0,REFUNDS:1},c={REGISTER:"ZCYZ",FINDPWD:"ZHMM",LOGIN:"YZMDL",CHANGE_MOBILE:"BGSJHM"}},"79a4":function(e,t,s){"use strict";s("e10b")},8247:function(e,t,s){e.exports=s.p+"img/default_avatar.f7a81b58.png"},c2b2:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-profile-container mt10"},[i("div",{staticClass:"user-profile"},[i("div",{staticClass:"user-avatar-box row-center"},[i("van-uploader",{attrs:{"after-read":e.afterRead}},[i("img",{staticClass:"user-avatar",attrs:{src:e.userInfo.avatar||s("8247")}})])],1),i("div",{staticClass:"row-info row bdb-line",on:{click:e.changeName}},[i("div",{staticClass:"label md"},[e._v("昵称")]),i("div",{staticClass:"md row",staticStyle:{flex:"1"}},[e._v(e._s(e.userInfo.nickname))]),i("img",{staticClass:"icon-sm",attrs:{src:s("d5b1")}})]),i("div",{staticClass:"row-info row bdb-line",on:{click:function(t){return e.changeSex()}}},[i("div",{staticClass:"label md"},[e._v("性别")]),i("div",{staticClass:"md row",class:0==e.userInfo.sex?"muted":"",staticStyle:{flex:"1"}},[e._v(e._s(0==e.userInfo.sex?"未设置":1==e.userInfo.sex?"男":"女"))]),i("img",{staticClass:"icon-sm",attrs:{src:s("d5b1")}})]),i("div",{staticClass:"row-info row bdb-line"},[i("div",{staticClass:"label md"},[e._v("手机号")]),i("div",{staticClass:"md row",class:{muted:e.userInfo.mobile},staticStyle:{flex:"1"}},[e._v(e._s(e.userInfo.mobile?e.userInfo.mobile:"未绑定"))]),i("div",{staticClass:"bd-btn br60",on:{click:e.showModifyMobile}},[e._v(" "+e._s(e.userInfo.mobile?"更换手机号":"绑定手机号")+" ")])]),e.isWechat?e._e():i("div",{staticClass:"row-info row-between",on:{click:e.showPwdPop}},[i("div",{staticClass:"label md"},[e._v("登录密码")]),e._m(0)]),i("div",{staticClass:"row-info row-between bdb-line mt10",on:{click:function(t){return e.goToExplain(0)}}},[i("div",{staticClass:"label md"},[e._v("服务协议")]),i("img",{staticClass:"icon-sm",attrs:{src:s("d5b1")}})]),i("div",{staticClass:"row-info row-between bdb-line",on:{click:function(t){return e.goToExplain(1)}}},[i("div",{staticClass:"label md"},[e._v("隐私政策")]),i("img",{staticClass:"icon-sm",attrs:{src:s("d5b1")}})]),e._m(1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isWechat,expression:"!isWechat"}],staticClass:"bg-primary white save-btn row-center lg",on:{click:e.logout}},[e._v("退出登录")])]),i("van-popup",{attrs:{closeable:e.canSendSms,round:"",transition:"fade"},model:{value:e.showMobile,callback:function(t){e.showMobile=t},expression:"showMobile"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMobile,expression:"showMobile"}],staticClass:"modify-container column-center"},[i("div",{staticClass:"title xl"},[e._v(e._s(e.userInfo.mobile?"更换手机号":"绑定手机号"))]),e.userInfo.mobile?i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"56px","border-right":"1px solid #E5E5E5"}},[e._v("+86")]),i("div",{staticStyle:{"margin-left":"15px"}},[e._v(e._s(e.userInfo.mobile))])]):i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("手机号")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.new_mobile,expression:"new_mobile"}],attrs:{placeholder:"请输入绑定手机号"},domProps:{value:e.new_mobile},on:{input:function(t){t.target.composing||(e.new_mobile=t.target.value)}}})]),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("验证码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.smsCode,expression:"smsCode"}],staticStyle:{"padding-left":"5px",width:"130px"},attrs:{placeholder:"请输入验证码"},domProps:{value:e.smsCode},on:{input:function(t){t.target.composing||(e.smsCode=t.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.canSendSms,expression:"canSendSms"}],staticClass:"send-code-btn nr row-center",on:{click:e.$sendSms}},[e._v("发送验证码")]),i("van-count-down",{directives:[{name:"show",rawName:"v-show",value:!e.canSendSms,expression:"!canSendSms"}],ref:"countDown",attrs:{"auto-start":!1,time:e.time,format:" ss 秒"},on:{finish:e.countDownFinish},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"send-code-btn nr row-center"},[e._v(e._s(t.seconds)+"秒")])]}}])})],1),e.userInfo.mobile?i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("新手机号")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.new_mobile,expression:"new_mobile"}],attrs:{placeholder:"请输入新的手机号码"},domProps:{value:e.new_mobile},on:{input:function(t){t.target.composing||(e.new_mobile=t.target.value)}}})]):e._e(),i("div",{staticClass:"primary mt10"},[e._v(e._s(e.userInfo.mobile?"更改":"绑定")+"手机号码成功后，您的账号将会变更为该设置号码")]),i("div",{staticClass:"btn bg-primary white row-center",on:{click:e.$changeUserMobile}},[e._v("确定")])])]),i("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.sexList},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),i("van-popup",{attrs:{closeable:e.canSendSms,round:"",transition:"fade"},model:{value:e.showPwd,callback:function(t){e.showPwd=t},expression:"showPwd"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showPwd,expression:"showPwd"}],staticClass:"modify-container column-center"},[i("div",{staticClass:"title xl"},[e._v("设置密码")]),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"56px","border-right":"1px solid #E5E5E5"}},[e._v("+86")]),i("div",{staticStyle:{"margin-left":"15px"}},[e._v(e._s(e.userInfo.mobile))])]),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("验证码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.smsCode,expression:"smsCode"}],staticStyle:{"padding-left":"5px",width:"130px"},attrs:{placeholder:"请输入验证码"},domProps:{value:e.smsCode},on:{input:function(t){t.target.composing||(e.smsCode=t.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.canSendSms,expression:"canSendSms"}],staticClass:"send-code-btn nr row-center",on:{click:e.$sendSms}},[e._v("发送验证码")]),i("van-count-down",{directives:[{name:"show",rawName:"v-show",value:!e.canSendSms,expression:"!canSendSms"}],ref:"countDown",attrs:{"auto-start":!1,time:e.time,format:" ss 秒"},on:{finish:e.countDownFinish},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"send-code-btn nr row-center"},[e._v(e._s(t.seconds)+"秒")])]}}])})],1),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("设置密码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}})]),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("确认密码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.comfirmPwd,expression:"comfirmPwd"}],attrs:{type:"password",placeholder:"再次输入新密码确认"},domProps:{value:e.comfirmPwd},on:{input:function(t){t.target.composing||(e.comfirmPwd=t.target.value)}}})]),i("div",{staticClass:"btn bg-primary white row-center",on:{click:e.$forgetPwd}},[e._v("确定")])])]),i("van-popup",{attrs:{closeable:!0,round:"",transition:"fade"},model:{value:e.showNickName,callback:function(t){e.showNickName=t},expression:"showNickName"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showNickName,expression:"showNickName"}],staticClass:"modify-container column-center"},[i("div",{staticClass:"title xl"},[e._v("修改用户名")]),i("div",{staticClass:"modify-row row"},[i("div",{staticStyle:{width:"71px"}},[e._v("新昵称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newNickname,expression:"newNickname"}],attrs:{placeholder:"请输入新的昵称"},domProps:{value:e.newNickname},on:{input:function(t){t.target.composing||(e.newNickname=t.target.value)}}})]),i("div",{staticClass:"btn bg-primary white row-center",on:{click:e.changeNameConfirm}},[e._v("确定")])])])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("div",{staticClass:"muted nr"},[e._v("点击设置")]),i("img",{staticClass:"icon-sm",attrs:{src:s("d5b1")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row-info row-between"},[s("div",{staticClass:"label md"},[e._v("关于我们")]),s("div",[e._v("v2.0.1.20210106")])])}],n=(s("4160"),s("d3b7"),s("3ca3"),s("159b"),s("ddb0"),s("5530")),a=s("2909"),c=s("c24f"),r=s("5f01"),l=s("b562"),d=s("399b"),m=s("bc3a"),v=s.n(m),w=s("2f62"),u={NONE:"",SEX:"sex",NICKNAME:"nickname",AVATAR:"avatar"},b={name:"userProfile",data:function(){return{fileList:[],userInfo:{},new_mobile:"",smsCode:"",newNickname:"",sexList:["男","女"],fieldType:u.NONE,showPicker:!1,showMobile:!1,showPwd:!1,showNickName:!1,time:6e4,canSendSms:!0,isWechat:!1,pwd:"",comfirmPwd:"",smsType:d["b"].FINDPWD}},methods:{afterRead:function(e){var t=this,s=[];e.length?e.forEach((function(e){s.push(t.uploadFile(e.file))})):s.push(this.uploadFile(e.file)),Promise.all(s).then((function(e){var s=t.fileList,i=void 0===s?[]:s;i.push.apply(i,Object(a["a"])(e)),t.$toast().clear(),t.fileList=i,t.fieldType=u.AVATAR,console.log(t.fieldType,t.fileList),t.$setUserInfo(t.fileList[0].base_url)}))},uploadFile:function(e){var t=this,s=new FormData;return s.append("file",e),new Promise((function(e){v.a.post(r["b"]+"file/formimage",s,{headers:{"Content-Type":"multipart/form-data",token:t.token}}).then((function(s){var i=s.data;1==i.code?e(i.data):t.$toast("上传失败，请重新上传")}))}))},logout:function(){var e=this;Object(c["I"])({token:this.token}).then((function(t){1==t.code&&(e.$store.commit("LOGOUT"),e.$toast({message:"登出成功"}),setTimeout((function(){e.$router.back(-1)}),1e3))}))},goToExplain:function(e){this.$router.push({name:"serverExplain",query:{type:e}})},$sendSms:function(){var e=this;Object(l["o"])({mobile:this.userInfo.mobile||this.new_mobile,key:this.smsType}).then((function(t){1==t.code&&(e.$toast({message:t.msg}),e.$refs.countDown.start(),e.canSendSms=!1)}))},$getUserInfo:function(){var e=this;Object(c["B"])().then((function(t){1==t.code&&(e.userInfo=t.data)}))},showModifyMobile:function(){this.smsCode="",this.new_mobile="",this.showMobile=!0,this.smsType=d["b"].CHANGE_MOBILE},$changeUserMobile:function(){var e=this;this.smsCode?this.new_mobile?Object(c["g"])({mobile:this.userInfo.mobile,new_mobile:this.new_mobile,code:this.smsCode}).then((function(t){1==t.code&&(e.showMobile=!1,e.$toast({message:t.msg}),e.$getUserInfo())})):this.$toast({message:"请输入新的手机号码"}):this.$toast({message:"请输入验证码"})},$setUserInfo:function(e){var t=this;Object(c["H"])({field:this.fieldType,value:e}).then((function(e){1==e.code&&(t.$toast({message:e.msg}),t.$getUserInfo())}))},onConfirm:function(e,t){this.$setUserInfo(t+1),this.showPicker=!1},changeSex:function(){this.showPicker=!0,this.fieldType=u.SEX},countDownFinish:function(){this.$refs.countDown.reset(),this.canSendSms=!0},showPwdPop:function(){this.smsCode="",this.smsType=d["b"].FINDPWD,this.showPwd=!0},$forgetPwd:function(){var e=this,t=this.smsCode,s=this.pwd,i=this.comfirmPwd;if(t)if(s)if(i)if(s==i){var o={mobile:this.userInfo.mobile,code:t,password:s,repassword:i,client:2};Object(l["a"])(o).then((function(t){1==t.code&&(e.showPwd=!1,e.$toast({message:"设置密码成功"}),e.$getUserInfo())}))}else this.$toast({message:"两次密码输入不一致"});else this.$toast({message:"再次输入新密码确认"});else this.$toast({message:"请输入新密码"});else this.$toast({message:"请填写短信验证码"})},changeName:function(){this.fieldType=u.NICKNAME,this.newNickname="",this.showNickName=!0},changeNameConfirm:function(){this.$setUserInfo(this.newNickname),this.showNickName=!1}},mounted:function(){this.$getUserInfo(),this.isWechat=Object(l["j"])()},computed:Object(n["a"])({},Object(w["c"])(["token"]))},f=b,h=(s("79a4"),s("2877")),p=Object(h["a"])(f,i,o,!1,null,"05de3600",null);t["default"]=p.exports},d5b1:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAABd1BMVEUAAAAAAAAAAABVVVVmZmZtbW1gYGBxcXFdXV1qampiYmJ2dnZtbW1mZmZgYGBwcHBpaWljY2NxcXFmZmZtbW1oaGhvb29qampmZmZsbGxtbW1ra2twcHBubm5ra2tvb29wcHBubm5tbW1wcHBtbW1wcHBvb29tbW1vb29ubm5ycnJsbGxxcXFwcHBubm5wcHBxcXFwcHBxcXFubm5ubm5vb29wcHBvb29vb29wcHBvb29vb29vb29vb29ubm5wcHBvb29vb29vb29ubm5vb29wcHBvb29ubm5wcHBwcHBvb29vb29vb29vb29wcHBubm5wcHBvb29vb29vb29wcHBvb29ubm5vb29vb29wcHBwcHBvb29vb29wcHBwcHBwcHBvb29vb29wcHBwcHBvb29wcHBvb29wcHBvb29vb29wcHBwcHBvb29wcHBvb29wcHBwcHBwcHBvb29vb29wcHBvb29wcHBwcHBvb29wcHBwcHBvb29wcHBhabGmAAAAfHRSTlMAAQIDBQcICQsMDQ0ODxAQERISFBUWFxgZGhwfIiUmJyksLzAxMjU2Nzo6Oz1AQUJGaW94eXp7gYOEhYeIiouLjI6RlpqbnJ2doKGjpqqtsLC3vb/AwcPDxcbJy8zP0tTV19nb3N3f4uPo6evs8vPz9Pb3+Pj6+vv8/P3+O+IQPgAAAZNJREFUWMPt2MdSAkEUheFBBZVRVEAUFVTMOeeIohINmDCLOWdhYObhhem2XLm7R4uqPg/w161vMXQhSWJiYmI5uLI2Vz6m3Lx9czkEKcsbWmYLhYijE9n0x7SZPt2q6Xvx0qete2kW95rI2+2HLP0+RW5icMe5yQy9Se0JN5mjN+k4wpk0nONM6uI4k05h8qvJ23gxzOR5AmByxk0myU0M3cc4k8YrnInrL0zGcCZPI0CTYSPM5HW0iN7kmrUfASb1FyrMpOcUZ+LJdZNBI8zk1kNv0vLA2gPk5cqgwn4te8nL6ym9rAZk4nJpkH1J1IMakEYqQl22rfGbI07icomf3azuV1Pf7E9yDfLyqgLWSMM0lDBKIx2uQmnEHDANR85oyEu8vEt9s9Wn/xWgJUN26nKE3xyivln28fKOXWj8aGyhNBIBK0ojQH2z+Vtjk/pmyyJKwxJOgjQKZvm3LlpB/Uhy3+vlz+Vy8pddF/vtXrHRP0cd2Se6EqW/WZLy+mPa3TyinHmiO/uaTJKYmJjYf+wLmpv4t3Rddy0AAAAASUVORK5CYII="},e10b:function(e,t,s){}}]);
//# sourceMappingURL=chunk-397c1e1e.ac4a54ea.js.map